(this["webpackJsonpplan-prise-cra"]=this["webpackJsonpplan-prise-cra"]||[]).push([[0],{376:function(e,t,n){e.exports=n(629)},381:function(e,t,n){},514:function(e,t){},516:function(e,t){},528:function(e,t){},530:function(e,t){},558:function(e,t){},559:function(e,t){},564:function(e,t){},566:function(e,t){},590:function(e,t){},629:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(26),o=n.n(i),c=(n(381),n(10)),s=n(12),l=n(14),u=n(13),d=n(24),p=n(46),m=n(77),f=n(89),h=n(345),v=n.n(h),g=n(346),E=(n(385),n(74)),b=n.n(E),y=n(6),O=n.n(y),w="http://".concat("localhost:8000").concat("/api/v1"),j=document.head.querySelector('meta[name="csrf-token"]');j||console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token");var k=b.a.create({baseURL:w,responseType:"json",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":j.content},withCredentials:!0}),x={interceptors:{request:[function(e,t){var n=e.getState,a=e.getSourceAction;if(O()(a(t),"auth")){var r=O()(n(),"auth.tokens.access_token");t.headers.Authorization="Bearer ".concat(r)}return t}]}},C=n(5),L=n(53),S=n.n(L),N=n(115),P=n.n(N),_=function(e){return{start:"".concat(e),success:"".concat(e,"_SUCCESS"),error:"".concat(e,"_FAIL")}},I=_("LOGIN"),T=_("LOGOUT"),D={isError:!1,isLoading:!1,tokens:null},A=function(e,t){switch(t.type){case I.start:return Object(C.a)(Object(C.a)({},e),{},{isLoading:!0,isError:!1});case I.success:return 200!==O()(t,"payload.status")?D:Object(C.a)(Object(C.a)({},e),{},{tokens:O()(t,"payload.data"),isLoading:!1});case I.error:return Object(C.a)(Object(C.a)({},D),{},{isError:!0});case"LOGIN_RESTORE":return Object(C.a)(Object(C.a)({},e),{},{tokens:t.tokens});default:return D}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=S()(e);if(P()(t.type,I.start))return A(n,t);switch(t.type){case"RESET":return D;default:return n}},R=n(35),M=n(133),z=n.n(M),q=n(22),G=n.n(q),U=n(15),B=n.n(U),F=n(33),H="CACHE_DETAILS",W="SET_STATUS",J=function(e,t,n){return{type:W,medicament:e,status:t,value:n}},X=n(17),Z=n.n(X),K=n(99),Q=n.n(K),$=function(e,t){var n=Z()(t)?t:[t];return Q()(n,(function(t){var n=z()(e.data,{id:t.value.id,type:t.type});-1===n?e.data.push(Object(C.a)(Object(C.a)(Object(C.a)({},e.empty),t.value),{},{type:t.type,data:t.data})):G()(e,"data.".concat(n,".data"),t.data)})),e},Y={empty:{state:{isLoading:!1},data:null},data:[]},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,n=S()(e);switch(t.type){case H:return $(n,t.details);case W:var a=z()(n.data,{id:t.medicament.id,type:t.medicament.type});return-1===a?(n.data.push(Object(C.a)(Object(C.a)({},n.empty),{},{state:Object(C.a)(Object(C.a)({},n.empty.state),{},Object(R.a)({},t.status,t.value))},t.medicament)),n):G()(n,"data.".concat(a,".state.").concat(t.status),t.value);default:return n}},te=n(347),ne=n.n(te),ae=n(11),re=n.n(ae),ie=n(132),oe=n.n(ie),ce=n(169),se=n.n(ce),le=n(192),ue=(n(484),function(){se()(function(){var e=Object(F.a)(B.a.mark((function e(t,n,a,r){var i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(window.php.routes.api.planprise.update,"/").concat(t),null===O()(window,"planPrise.toast",null)&&G()(window,"planPrise.toast",le.a.notify("Sauvegarde automatique",{duration:null,position:"top-right"})),e.abrupt("return",k().put(i,{action:n,value:a}).then((function(e){if(window.planPrise.toast&&le.a.close(window.planPrise.toast.id,window.planPrise.toast.position),window.planPrise.toast=null,200===!e.status)throw new Error(e.statusText);return!r||r(e.data.pp_id)})).catch((function(e){window.planPrise.toast&&le.a.close(window.planPrise.toast.id,window.planPrise.toast.position),window.planPrise.toast=null,console.log(e)})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),5e3)}),de=function(){var e=Object(F.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k().get(window.php.routes.api.planprise.index).then((function(e){if(200===!e.status)throw new Error(e.statusText);return e.data})).catch((function(e){throw console.log(e),new Error(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(F.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k().get("".concat(window.php.routes.api.planprise.index,"/").concat(t)).then((function(e){if(200===!e.status)throw new Error(e.statusText);return e.data})).catch((function(e){throw console.log(e),new Error(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me="SET_LOADING",fe="INIT",he="RESET",ve="UPDATE",ge="UPDATE_LINE",Ee="LOAD_RESULT",be="UPDATE_SETTINGS",ye="LOAD_LIST",Oe="LOAD_DETAILS",we="ADD_CUSTOM_ITEM",je=function(e){return e.push("/plan-prise"),{type:he}},ke=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){var a={state:!1,message:""};return oe()(e)>0?(n({type:me,values:{state:!0,message:"Chargement en cours... "}}),n({type:fe,id:e}),t?(pe(e).then((function(e){n({type:Oe,values:{content:re()(e.medicaments,(function(e){return{id:e.value.id,denomination:e.value.denomination,type:e.type}})),customData:e.custom_data||{},settings:e.custom_settings}}),n({type:H,details:e.medicaments}),n({type:me,values:a})})),!0):n({type:me,values:a})):n({type:fe,id:-1})}},xe=function(e){return{type:ve,action:e}},Ce=n(135),Le=n.n(Ce),Se=n(136),Ne=n.n(Se),Pe=n(348),_e=n.n(Pe),Ie=n(349),Te=n.n(Ie),De=n(350),Ae=n.n(De),Ve=n(351),Re=n.n(Ve),Me=function(e,t){var n=t.input,a=n.id,r=n.child,i=n.multiple,o=n.parent,c=n.readOnly,s=t.action,l=s.type,u=s.value,d=t.lineId,p=e.customData,m=e.loadedData;if("data"===l)return G()(m,d,_e()(O()(m,d,{}),u)),Object(C.a)(Object(C.a)({},e),{},{loadedData:m});if(c)return e;if(!0===i){var f=O()(p,"".concat(d,".").concat(o),{});"value"===l?G()(f,"".concat(a,".").concat(r),u):"check"===l?(G()(f,"".concat(a,".checked"),u),console.log("check",f)):"choose"===l?G()(f,"".concat(a),u):"create"===l&&(G()(f,"".concat(a,".").concat(r),u),G()(f,"".concat(a,".checked"),!0)),G()(p,"".concat(d,".").concat(o),f)}else G()(p,"".concat(d,".").concat(o),u);return Object(C.a)(Object(C.a)({},e),{},{customData:p})},ze=function(e,t){var n,a,r=t.action,i=r.type,o=r.value;switch(i){case"add":return n=Re()(Ne()(e.content,o),"id"),Object(C.a)(Object(C.a)({},e),{},{content:Le()(n)});case"remove":return n=Ae()(e.content,["id",o]),a=Te()(e.customData,o),Object(C.a)(Object(C.a)({},e),{},{content:n,customData:a});default:throw console.log(t),Error("No action type")}},qe={content:null,customData:null,isLoading:{state:!1,message:""},list:null,pp_id:null,settings:null},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,n=S()(e);switch(t.type){case me:return Object(C.a)(Object(C.a)({},n),{},{isLoading:t.values});case fe:return Object(C.a)(Object(C.a)({},n),{},{pp_id:t.id});case Oe:return Object(C.a)(Object(C.a)({},n),t.values);case he:return Object(C.a)(Object(C.a)({},qe),{},{list:n.list});case ge:return Me(n,t);case ve:return ze(n,t);case Ee:return n;case be:var a=t.input,r=a.parent,i=a.id;return"check"===t.value.action&&G()(n,"settings.".concat(r,".").concat(i,".checked"),t.value.value),n;case ye:return Object(C.a)(Object(C.a)({},n),{},{list:t.list});case we:return G()(n,"customData.".concat(t.lineId,".custom_").concat(t.input,".").concat(ne()("custom_".concat(t.input,"_"))),Object(R.a)({checked:!0},"custom_".concat(t.input),"")),n;default:return n}},Ue=_("LOAD_USER"),Be={isError:!1,isLoading:!1,details:{}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0,n=S()(e);switch(console.log(t),t.type){case Ue.start:return Object(C.a)(Object(C.a)({},e),{},{isLoading:!0,isError:!1});case Ue.success:return 200!==O()(t,"payload.status")?Be:Object(C.a)(Object(C.a)({},e),{},{details:O()(t,"payload.data"),isLoading:!1});case Ue.error:return Object(C.a)(Object(C.a)({},e),{},{isLoading:!1,isError:!0});default:return n}},He=Object(f.c)({auth:V,data:ee,planPrise:Ge,user:Fe}),We=[];We.push(g.a),We.push(v()(k,x));var Je=Object(f.d)(f.a.apply(void 0,We))(f.e)(He),Xe=n(631),Ze=function(){return r.a.createElement(Xe.a,null,"Test")},Ke=n(120),Qe=n(640),$e=n(639),Ye=n(354),et=n.n(Ye),tt="state.auth.tokens",nt=function(e,t){var n=function(e){var t=et.a.decode(e,{complete:!0});return t?O()(t,"payload"):null}(e);return n?n[t]:null};var at,rt={client_id:"3",client_secret:"uh9b4oN8GsZnTVlZSI3iNyZPOiGmF5zI6VlbfVgW",grant_type:"password",scope:""},it=function(e){var t=e.username,n=e.password;return function(e){e({type:I.START,auth:!0,payload:{request:{method:"post",data:Object(C.a)({username:t,password:n},rt),url:"/oauth/token"}}}).then((function(e){try{if(200!==e.payload.status)throw new Error("User could not be logged in. ");!function(e){try{localStorage.setItem(tt,JSON.stringify(e))}catch(t){return console.error("Error storing token",t)}}(O()(e,"payload.data"))}catch(t){console.log("Could not store tokens to localStorage",t)}}))}},ot=function(){return localStorage.removeItem(tt),{type:"RESET"}},ct=function(){return function(e){var t=function(){try{var e=localStorage.getItem(tt);if(!e)throw new Error;return JSON.parse(e)||void 0}catch(t){return}}();t&&e({type:"LOGIN_RESTORE",tokens:t})}},st=function(e){return function(t){Object(l.a)(a,t);var n=Object(u.a)(a);function a(){return Object(c.a)(this,a),n.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){if(!("tokens"in this.props)&&!("doRestore"in this.props))throw new Error("Authentication needs direct access to tokens");var t=O()(this.props,"tokens");t||Je.dispatch(ct());var n=function(e){if(!e)return!1;var t=e.access_token;return 1e3*nt(t,"exp")>(new Date).getTime()}(t),a=!t.access_token,i=nt(O()(t,"access_token"),"usr")||{};return r.a.createElement(e,Object.assign({},this.props,{auth:{hasToken:a,isValid:n,user:i}}))}}]),a}(r.a.Component)},lt=Object(d.b)((function(e){return{tokens:e.auth.tokens}}))(st(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).auth=function(t){return e.props.auth.isValid?t:null},e.public=function(t){return e.props.auth.isValid?null:t},e.admin=function(t){var n=e.props.auth.user.admin;return void 0!==n&&n?e.auth(t):null},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.auth.user.name,t=void 0===e?"":e;return r.a.createElement(Qe.a,{bg:"light",className:"mb-1",expand:"lg"},r.a.createElement(Qe.a.Brand,null,r.a.createElement(p.Link,{to:"/"},"Plan de prise")),r.a.createElement(Qe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(Qe.a,{id:"basic-navbar-nav"},r.a.createElement($e.a,{className:"mr-auto"},this.auth(r.a.createElement(Ke.LinkContainer,{to:"/plan-prise"},r.a.createElement($e.a.Link,null,"Plan de prise")))),this.auth(r.a.createElement($e.a,null,r.a.createElement(Ke.LinkContainer,{to:"/profile"},r.a.createElement($e.a.Link,null,t)),r.a.createElement(Ke.LinkContainer,{to:"/deconnexion"},r.a.createElement($e.a.Link,null,"Se d\xe9connecter")))),this.public(r.a.createElement($e.a,null,r.a.createElement(Ke.LinkContainer,{to:"/connexion"},r.a.createElement($e.a.Link,null,"Se connecter")),r.a.createElement(Ke.LinkContainer,{to:"/inscription"},r.a.createElement($e.a.Link,null,"S'inscrire"))))))}}]),n}(r.a.Component))),ut=n(634),dt=n(638),pt=n(635),mt=n(373),ft=n(191),ht=n(182),vt=n.n(ht),gt=n(186),Et=n(632),bt=n(633),yt=n(360),Ot=n(642),wt=function(e){var t=e.children,n=e.header,a=e.size,i=Object(gt.a)(e,["children","header","size"]);return a=a||{xl:8},r.a.createElement(Et.a,i,r.a.createElement(bt.a,{className:"justify-content-center"},r.a.createElement(yt.a,a,r.a.createElement(Ot.a,null,r.a.createElement(Ot.a.Header,{className:"d-flex"},n),r.a.createElement(Ot.a.Body,null,t)))))},jt=["/deconnexion"],kt=ft.a().shape({signinEmail:ft.b().email("L'adresse mail entr\xe9e ne semble pas valide").required("L'adresse mail est requise"),signinPassword:ft.b().required("Le mot de passe est requis")});!function(e){e[e.signin=0]="signin",e[e.register=1]="register",e[e.signout=2]="signout"}(at||(at={}));var xt={doLogin:function(e){return it(e)},doLogout:function(){return function(e){e({type:T.START,auth:!0,payload:{request:{method:"delete",url:"/oauth/token"}}}).then((function(){return e(ot())})).catch((function(){return e(ot())}))}},reset:function(){return ot()}},Ct=Object(d.b)((function(e){return{isError:e.auth.isError,isLoading:e.auth.isLoading,tokens:e.auth.tokens}}),xt),Lt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).redirect=function(){var e;if(a.props.auth.isValid&&(e=!0),e){var t=O()(a.props,"location.state.redirectTo","/");return vt()(jt,t)&&(t="/"),r.a.createElement(m.c,{to:t})}return null},a.handleSignout=function(){a.props.doLogout()},a.getTitle=function(e){switch(e){case at.signin:return"Connexion";case at.register:return"Inscription";case at.signout:return"D\xe9connexion";default:return""}},a.getMessage=function(e){switch(e){case"unauthorized":return"Vous devez vous connecter avant d'acc\xe9der \xe0 cette page. ";case"expired":return"Vous avez \xe9t\xe9 deconnect\xe9. ";default:return null}},a.state={isMounted:!1},e.role===at.signout&&a.handleSignout(),e.role===at.signin&&O()(e,"location.state.message")&&e.reset(),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0})}},{key:"componentWillUnmount",value:function(){this.setState({isMounted:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isLoading,a=t.role,i=O()(this.props,"location.state.message",null);return this.redirect()?this.redirect():r.a.createElement(wt,{header:this.getTitle(a),size:{md:6}},i?r.a.createElement(ut.a,{variant:"danger"},e.getMessage(i)):null,a===at.signin&&r.a.createElement(mt.a,{initialValues:{signinEmail:"",signinPassword:""},validationSchema:kt,onSubmit:function(t,n){var a=n.setSubmitting;a(!0);var r=t.signinEmail,i=t.signinPassword,o=e.props.doLogin;r&&i&&(o({password:i,username:r}),e.state.isMounted&&a(!1))}},(function(e){var t=e.values,a=e.errors,i=e.touched,o=e.handleChange,c=e.handleBlur,s=e.handleSubmit;return r.a.createElement(dt.a,{noValidate:!0,onSubmit:s},r.a.createElement(dt.a.Group,{controlId:"signinEmail"},r.a.createElement(dt.a.Label,null,"Adresse mail"),r.a.createElement(dt.a.Control,{autoComplete:"username",isInvalid:!!a.signinEmail,name:"signinEmail",placeholder:"Adresse mail",type:"email",value:t.signinEmail,onBlur:c,onChange:o}),a.signinEmail&&i.signinEmail?r.a.createElement(dt.a.Control.Feedback,{type:"invalid"},a.signinEmail):r.a.createElement(dt.a.Text,{className:"text-muted"},"Ne sera jamais utilis\xe9e ou diffus\xe9e.")),r.a.createElement(dt.a.Group,{controlId:"signinPassword"},r.a.createElement(dt.a.Label,null,"Mot de passe"),r.a.createElement(dt.a.Control,{autoComplete:"current-password",isInvalid:!!a.signinPassword,name:"signinPassword",placeholder:"Adresse mail",type:"password",value:t.signinPassword,onBlur:c,onChange:o}),r.a.createElement(dt.a.Control.Feedback,{type:"invalid"},a.signinPassword)),r.a.createElement(Xe.a,{block:!0,disabled:n,type:"submit"},n&&r.a.createElement(pt.a,{animation:"border",size:"sm",style:{marginRight:10}}),n?"Connexion en cours":"Se connecter"))})),a===at.register&&r.a.createElement("p",null,"\xc0 mettre en place... "),a===at.signout&&r.a.createElement(r.a.Fragment,null,r.a.createElement(pt.a,{animation:"border",as:"span",className:"mr-2",size:"sm"}),"D\xe9connexion en cours"))}}]),n}(r.a.Component),St=Object(m.o)(Ct(st(Lt))),Nt=Object(d.b)((function(e){return{tokens:e.auth.tokens}}))(st((function(e){var t=e.auth,n=e.path;if(!t.hasToken){console.info("Cannot access route: No token provided",n);var a=n;return r.a.createElement(m.c,{to:{pathname:"/connexion",state:{message:"unauthorized",redirectTo:a}}})}if(!t.isValid){console.info("Cannot access route: Token expired",n);var i=n;return r.a.createElement(m.c,{to:{pathname:"/connexion",state:{message:"expired",redirectTo:i}}})}return r.a.createElement(m.d,e)}))),Pt=n(142),_t=n(32),It=n.n(_t),Tt={loadUser:function(){return{type:Ue.start,payload:{request:{url:"/user"}},auth:!0}}},Dt=Object(d.b)((function(e){return{details:e.user.details,isError:e.user.isError,isLoading:e.user.isLoading}}),Tt)((function(e){var t=e.details,n=e.isError,i=e.isLoading,o=Object(a.useState)(!1),c=Object(Pt.a)(o,2),s=c[0],l=c[1];Object(a.useEffect)((function(){var a=e.loadUser;0!==It()(t).length||i||n||a()}));var u=function(e){return s!==e?r.a.createElement(Xe.a,{block:!0,variant:"link",onClick:function(){return l(e)}},r.a.createElement("span",{className:"fa fa-edit"})):r.a.createElement(bt.a,null,r.a.createElement(yt.a,{className:"p-0",sm:6},r.a.createElement(Xe.a,{variant:"success",onClick:function(){return l(!1)}},r.a.createElement("span",{className:"fa fa-check"}))),r.a.createElement(yt.a,{className:"p-0",sm:6},r.a.createElement(Xe.a,{variant:"danger",onClick:function(){return l(!1)}},r.a.createElement("span",{className:"fa fa-times"}))))};return r.a.createElement(wt,{header:"Profil"},i?"Chargement en cours... ":n?"Erreur lors du chargement":r.a.createElement(r.a.Fragment,null,r.a.createElement(dt.a.Group,{as:bt.a,controlId:"name"},r.a.createElement(dt.a.Label,{column:!0,sm:"3"},"Nom et Pr\xe9nom"),r.a.createElement(yt.a,{sm:"7"},r.a.createElement(dt.a.Control,{defaultValue:t.name||"",name:"name",plaintext:"name"!==s,readOnly:"name"!==s})),r.a.createElement(yt.a,{sm:"2"},u("name"))),r.a.createElement(dt.a.Group,{as:bt.a,controlId:"rpps"},r.a.createElement(dt.a.Label,{column:!0,sm:"3"},"RPPS"),r.a.createElement(yt.a,{sm:"7"},r.a.createElement(dt.a.Control,{defaultValue:"Reste \xe0 ajouter",name:"rpps",plaintext:"rpps"!==s,readOnly:"rpps"!==s})),r.a.createElement(yt.a,{sm:"2"},u("rpps"))),r.a.createElement(dt.a.Group,{as:bt.a,controlId:"display-name"},r.a.createElement(dt.a.Label,{column:!0,sm:"3"},"Nom affich\xe9",r.a.createElement(dt.a.Text,{className:"text-muted"},"Sera imprim\xe9 sur les documents")),r.a.createElement(yt.a,{sm:"7"},r.a.createElement(dt.a.Control,{defaultValue:t.display_name||t.name||"",name:"display-name",plaintext:"display-name"!==s,readOnly:"display-name"!==s})),r.a.createElement(yt.a,{sm:"2"},u("display-name"))),r.a.createElement(dt.a.Group,{as:bt.a,controlId:"email"},r.a.createElement(dt.a.Label,{column:!0,sm:"3"},"Email"),r.a.createElement(yt.a,{sm:"7"},r.a.createElement(dt.a.Control,{defaultValue:t.email||"",name:"email",plaintext:"email"!==s,readOnly:"email"!==s})),r.a.createElement(yt.a,{sm:"2"},u("email"))),r.a.createElement(dt.a.Group,{as:bt.a,controlId:"old-password"},r.a.createElement(dt.a.Label,{column:!0,sm:"3"},"password"===s?"Ancien mot de passe":"Mot de passe"),r.a.createElement(yt.a,{sm:"7"},r.a.createElement(dt.a.Control,{autoComplete:"current-password",defaultValue:"password"!==s?"***************":"",name:"old-password",plaintext:"password"!==s,readOnly:"password"!==s,type:"password"})),r.a.createElement(yt.a,{sm:"2"},u("password"))),"password"===s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(dt.a.Group,{as:bt.a,controlId:"new-password-1"},r.a.createElement(dt.a.Label,{column:!0,sm:"3"},"Nouveau mot de passe"),r.a.createElement(yt.a,{sm:"7"},r.a.createElement(dt.a.Control,{autoComplete:"new-password",name:"new-password-1",type:"password"})),r.a.createElement(yt.a,{sm:"2"})),r.a.createElement(dt.a.Group,{as:bt.a,controlId:"new-password-2"},r.a.createElement(dt.a.Label,{column:!0,sm:"3"},"Confirmation"),r.a.createElement(yt.a,{sm:"7"},r.a.createElement(dt.a.Control,{autoComplete:"new-password",name:"new-password-2",type:"password"})),r.a.createElement(yt.a,{sm:"2"})))))})),At=n(42),Vt=n.n(At),Rt=n(641),Mt=n(636),zt=n(31),qt=n(361),Gt=n.n(qt),Ut=n(362),Bt=n.n(Ut),Ft=n(231),Ht=n.n(Ft),Wt=n(140),Jt=n.n(Wt),Xt=function(){function e(t){Object(c.a)(this,e),this.props=t}return Object(s.a)(e,[{key:"values",get:function(){var e=this.props,t=e.addedData,n=e.customValue,a=e.defaultValue,r=e.input,i=e.medicament,o=e.needChoice;if(!i)return[];if("denomination"===r.id)return[{value:i.custom_denomination,style:"custom_denomination"},{value:re()(i.compositions,"denomination").join(" + "),style:"compositions"},{value:"(Voie ".concat(Bt()(window.php.default.voies_administration[i.voies_administration])||"",")"),style:"voies_administration"}];var c=n.length>0?n:a;if(o)return r.multiple?Ne()(re()(a,(function(e){var t=O()(n,"".concat(e.id,".").concat(r.display),O()(e,r.display,""));return{checked:O()(n,"".concat(e.id,".checked"),null===e.population),value:t,help:O()(e,r.help,O()(r,"label",null)),id:e.id}})),re()(Ht()(t),(function(e,n){return{value:O()(e,"custom_".concat(r.id),null),checked:e.checked,id:It()(t)[n],addedData:!0}}))):re()(c,(function(e){return{value:O()(e,r.display,null),choose:O()(e,r.choose,null)}}));if(!Z()(c))return c;switch(c.length){case 0:return null;case 1:return c[0][r.display];default:return re()(c,(function(e){return O()(e,r.display,null)}))}}}]),e}(),Zt=function(){function e(t){var n=this;Object(c.a)(this,e),this.getColumns=function(){var e=S()(window.php.default.inputs),t=e.posologies.inputs;return e.posologies.inputs=Le()(re()(It()(t),(function(e){var a=t[e],r=O()(n.settings,"inputs.".concat(a.id,".checked"),null),i=a.default;return r||null===r&&i?a:null}))),[{header:"M\xe9dicament",id:"denomination",multiple:!0}].concat(Object(zt.a)(re()(e.properties.inputs,(function(e){return Object(C.a)({header:e.label},e)}))),Object(zt.a)(re()(e.posologies.inputs,(function(e){return Object(C.a)({header:e.label,poso:!0},e)}))),Object(zt.a)(re()(e.commentaires.inputs,(function(e){return Object(C.a)({header:e.label},e)}))))},this.init=function(){n.valuesObject=re()(n.content,(function(e){var t={},a=Vt()(n.data,e);return Q()(n.columns,(function(r){var i=O()(a,"data.".concat(r.id),[]),o=O()(n.customData,"".concat(e.id,".").concat(r.id),[]),c=r.multiple||0===o.length&&Z()(i)&&i.length>1,s=O()(n.customData,"".concat(e.id,".custom_").concat(r.id),[]),l=new Xt({defaultValue:i,customValue:o,needChoice:c,addedData:s,medicament:O()(a,"data",null),input:r});G()(t,r.id,l.values),c&&!r.multiple&&G()(n.needChoiceObject,e.id,Ne()(O()(n.needChoiceObject,e.id,[]),[r.id]))})),{line:e,state:O()(a,"state",null),data:t}}))},this.isLoading=function(e){var t=Vt()(n.data,e);return!!t&&t.state.isLoading},this.isLoaded=function(e){var t=Vt()(n.data,e)||{data:null,state:{isLoading:!1}};return t.data&&!t.state.isLoading},this.content=t.content||[],this.customData=t.customData||[],this.data=t.data||[],this.settings=t.settings||[],this.valuesObject={},this.needChoiceObject={},this.init()}return Object(s.a)(e,[{key:"columns",get:function(){return this.getColumns()}},{key:"inputs",get:function(){var e=this,t=S()(window.php.default.inputs),n=t.posologies.inputs;return t.posologies.inputs=Le()(re()(It()(n),(function(t){var a=n[t],r=O()(e.settings,"inputs.".concat(a.id,".checked"),null),i=a.default;return r||null===r&&i?a:null}))),t}},{key:"values",get:function(){var e=this;return re()(this.valuesObject,(function(t){return Gt()(t.data,(function(t,n){if(Jt()(t))return{text:t,style:n};if(Z()(t)){var a=Vt()(e.columns,{id:n});if(a.multiple)return{stack:re()(t,(function(e){return{text:Jt()(e)?e:e.value,style:e.style?e.style:n}})).flatMap((function(e,t){return[e,{text:" ",style:"interline"}]}))};if(a.join)return{text:re()(t,(function(e){return Jt()(e)?e:e.value})).join(a.join)}}return""}))}))}},{key:"needChoice",get:function(){return this.needChoiceObject}}]),e}(),Kt=n(236),Qt=n.n(Kt),$t=n(363),Yt=n.n($t),en=n(364),tn=n.n(en),nn=n(365),an=n.n(nn);Qt.a.vfs=Yt.a.pdfMake.vfs;var rn=n(119),on=n(366),cn=n.n(on),sn=n(36),ln=n.n(sn),un=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){cn()(this.textarea)}},{key:"render",value:function(){var e=this,t=this.props,n=t.input,a=t.lineId,i=t.updateLine,o=t.value,c=ln()(o)?o.value:o,s=O()(o,"help",null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt.a.Text,{className:"text-muted font-italic",style:{fontSize:".8em"}},s),r.a.createElement(dt.a.Control,{ref:function(t){e.textarea=t},as:"textarea",className:"flex-fill",disabled:n.readOnly,rows:1,value:c||"",onChange:function(t){return i(a,{type:"value",value:t.target.value},{parent:O()(o,"addedData",!1)?"custom_".concat(n.id):n.id,child:O()(o,"addedData",!1)?"custom_".concat(n.id):n.display,id:O()(e.props,"value.id",null),readOnly:n.readOnly,multiple:n.multiple})}}))}}]),n}(r.a.Component),dn=function(e){var t=e.children,n=e.input;return r.a.createElement("div",null,r.a.createElement("p",{className:"text-muted mb-0 ml-1",style:{fontSize:".8em"}},n.label),t)},pn=Object(d.b)(null,(function(e){return{updateLine:function(t,n,a){return e(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(a,r){a({type:ge,input:n,action:t,lineId:e}),ue(r().planPrise.pp_id,r().planPrise.customData)}}(t,n,a))}}}))((function(e){var t=e.addCustomItem,n=e.updateLine,a=e.values,i=Object(gt.a)(e,["addCustomItem","updateLine","values"]),o=i.input,c=i.lineId,s=a[o.id];return Z()(s)?r.a.createElement(dn,{input:o},[].concat(Object(zt.a)(re()(s,(function(e){return r.a.createElement(dt.a.Group,{key:e},r.a.createElement(dt.a.Check,{className:"flex-fill mb-2"},r.a.createElement(rn.a.Input,{checked:e.checked,style:e.help?{marginTop:"1.8em"}:null,type:o.multiple?"checkbox":"radio",onChange:function(t){return n(c,{type:o.multiple?"check":"choose",value:o.multiple?t.target.checked:e.choose},{parent:e.addedData?"custom_".concat(o.id):o.id,id:e.id,multiple:o.multiple})}}),r.a.createElement(rn.a.Label,{className:"d-flex flex-column"},r.a.createElement(un,Object.assign({value:e},i)))))}))),[o.multiple&&r.a.createElement(Xe.a,{key:-1,variant:"link",onClick:function(){return t(null,o.id)}},"Nouvelle ligne")])):r.a.createElement(dn,{input:o},r.a.createElement(dt.a.Group,null,r.a.createElement(un,Object.assign({value:s},i))))})),mn=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isOpened:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.details,a=t.denomination,i=t.isLoaded,o=t.lineId,c=t.needChoice,s=t.removeLine,l=t.repository,u=this.state.isOpened,d=O()(n,"data",null),p=o,m=l.inputs;return r.a.createElement(Ot.a,{className:"mb-3"},r.a.createElement(Ot.a.Header,{className:"d-flex",onClick:function(t){return!t.target.classList.contains("prevent-toggle")&&d&&e.setState({isOpened:!u})}},r.a.createElement("div",{className:"d-flex flex-column flex-grow-1",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-truncate"},d&&Vt()(d.denomination,{style:"custom_denomination"})?Vt()(d.denomination,{style:"custom_denomination"}).value:"Chargement de ".concat(a," en cours... "))),d&&Vt()(d.denomination,{style:"compositions"})&&r.a.createElement("div",{className:"text-muted text-truncate"},r.a.createElement("small",null,Vt()(d.denomination,{style:"compositions"}).value))),r.a.createElement("div",{className:"d-flex flex-shrink-0 flex-column"},i?r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,{className:"rounded-pill text-danger ml-auto py-0 prevent-toggle",size:"sm",tabIndex:"-1",variant:"light",onClick:function(){return s(p)}},r.a.createElement("small",{className:"mr-1 prevent-toggle"},"Supprimer la ligne"),r.a.createElement("i",{className:"fa fa-trash prevent-toggle"})),r.a.createElement(Xe.a,{className:"rounded-pill text-muted ml-auto py-0 mt-1",size:"sm",tabIndex:"-1",variant:"light"},u?r.a.createElement(r.a.Fragment,null,r.a.createElement("small",{className:"mr-1"},"Masquer les d\xe9tails"),r.a.createElement("i",{className:"far fa-caret-square-up"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("small",{className:"mr-1"},"Afficher les d\xe9tails"),r.a.createElement("i",{className:"far fa-caret-square-down"})))):r.a.createElement(Xe.a,{className:"ml-auto",disabled:!0,size:"sm",tabIndex:"-1",variant:"link"},r.a.createElement("small",{className:"mr-1"},"Chargement en cours"),r.a.createElement(pt.a,null)))),i&&r.a.createElement(Ot.a.Body,{className:"row"},re()(It()(m),(function(e){var t=m[e];if(!t.collapse||u)return r.a.createElement("div",{key:e,className:u||t.collapse?t.class:"col-md-12 d-flex justify-content-around"},re()(t.inputs,(function(e){return r.a.createElement(pn,{key:e,input:e,lineId:p,values:n.data})})));var a=Vt()(t.inputs,(function(e){return vt()(c,e.id)}));return a&&r.a.createElement("div",{key:e,className:"col-md-12 justify-content-around"},r.a.createElement(pn,{input:a,lineId:p,values:n.data}))}))))}}]),n}(r.a.Component),fn=Object(d.b)(null,(function(e){return{addCustomItem:function(t,n){return e(function(e,t){return{type:we,input:t,lineId:e}}(t,n))},removeLine:function(t){return e(function(e){return function(){var t=Object(F.a)(B.a.mark((function t(n,a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(xe({type:"remove",value:e})),ue(a().planPrise.pp_id),ue.flush();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))}}}))(mn),hn=n(372),vn=n(170),gn=n.n(vn),En=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).loadOptions=function(){var e=Object(F.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.axiosSourceOptions&&a.axiosSourceOptions.cancel("Cancel previous request"),a.axiosSourceOptions=b.a.CancelToken.source(),e.abrupt("return",b.a.get(window.php.routes.api.all.search,{cancelToken:a.axiosSourceOptions.token,params:{token:window.php.routes.token,query:t}}).then((function(e){return e.data.length>0?e.data:[]})).catch((function(e){b.a.isCancel(e)||console.log(e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSelect=function(e){var t=a.props,n=t.multiple;return(0,t.onSelect)(e||[]),n&&a.setValue(null),e},a.handleChange=function(e){return a.setValue(e),e},a.setValue=function(e){a.setState((function(t){return{select:Object(C.a)(Object(C.a)({},t.select),{},{value:e})}}))},a.state={select:{value:null}},a.loadOptions=se()(a.loadOptions,500,{leading:!0}),a}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.defaultOptions,n=e.multiple,a=this.state.select,i={};if(document.querySelector(".btn-primary")){i.primary=document.querySelector(".btn-primary")?window.getComputedStyle(document.querySelector(".btn-primary")).backgroundColor:"grey";var o=/rgba?\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*\d+[.\d+]*)*\)/g.exec(i.primary);i.primary50="rgba(".concat([o[1],o[2],o[3],.5].join(","),")"),i.primary75="rgba(".concat([o[1],o[2],o[3],.75].join(","),")"),i.primary25="rgba(".concat([o[1],o[2],o[3],.25].join(","),")")}return r.a.createElement(hn.a,{cacheOptions:!0,defaultValue:t,isMulti:n||!1,loadingMessage:gn()("Chargement en cours..."),loadOptions:this.loadOptions,menuPlacement:"auto",noOptionsMessage:gn()("Aucun m\xe9dicament ne correspond \xe0 la recherche"),placeholder:"Ajouter un m\xe9dicament au plan de prise",theme:function(e){return Object(C.a)(Object(C.a)({},e),{},{colors:Object(C.a)(Object(C.a)({},e.colors),i)})},value:a.value,onChange:this.handleSelect})}}]),n}(r.a.Component),bn=n(637),yn=n(367),On=n.n(yn),wn=n(368),jn=n.n(wn),kn=Object(d.b)((function(e){return{settings:e.planPrise.settings}}),(function(e){return{updateSettings:function(t,n){return e(function(e,t){return function(){var n=Object(F.a)(B.a.mark((function n(a,r){return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:be,input:e,value:t}),ue(r().planPrise.pp_id,r().planPrise.settings);case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){var t=e.setShowSettings,n=e.showSettings,a=e.updateSettings;return r.a.createElement(bn.a,{show:n,onHide:function(){return t(!1)}},r.a.createElement(bn.a.Header,{closeButton:!0},r.a.createElement(bn.a.Title,null,"Options")),r.a.createElement(bn.a.Body,null,r.a.createElement("h5",null,"Colonnes \xe0 afficher"),r.a.createElement(bt.a,null,re()(jn()(It()(window.php.default.inputs.posologies.inputs),On()(window.php.default.inputs.posologies.inputs.length/2)),(function(t){return r.a.createElement(yt.a,{key:t.id,sm:6},re()(t,(function(t){var n=window.php.default.inputs.posologies.inputs[t];return r.a.createElement(dt.a.Group,{key:t,className:"mb-0",controlId:t},r.a.createElement(dt.a.Check,{checked:O()(e,"settings.inputs.".concat(n.id,".checked"),n.default||!1),label:n.label,type:"checkbox",onChange:function(e){return a({parent:"inputs",id:n.id},{action:"check",value:e.target.checked})}}))})))})))))})),xn=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleSelect=function(t,n){t.preventDefault(),(0,e.props.init)(n)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.list;return r.a.createElement("div",null,r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"list-group"},r.a.createElement(p.Link,{className:"list-group-item list-group-item-action list-group-item-success",to:"/plan-prise/nouveau"},"Cr\xe9er un plan de prise"))),r.a.createElement("div",{className:"col-md-6"},e?r.a.createElement("div",{className:"list-group"},r.a.createElement("div",{style:{maxHeight:"".concat(this.lineMax*this.lineHeight,"rem"),overflow:"scroll"}},re()(e,(function(e){return r.a.createElement(p.Link,{key:e.pp_id,className:"list-group-item list-group-item-action",to:"/plan-prise/".concat(e.pp_id)},"Plan de prise n\xb0",e.pp_id)})))):r.a.createElement("div",null,r.a.createElement(pt.a,null),r.a.createElement("span",{className:"ml-2"},"Chargement de vos plans de prise...")))))}}]),n}(r.a.Component),Cn=Object(d.b)((function(e){return{list:e.planPrise.list}}),(function(e){return{init:function(t){return e(ke(t))}}}))(xn),Ln=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).init=function(){var e=a.props,t=e.content,n=e.init,r=e.list,i=e.load,o=e.loadList,c=e.match,s=e.ppId,l=e.repository,u=c.params.id;!s&&u&&n(u),null===r&&o(),t&&Q()(t,(function(e){l.isLoaded(e)||l.isLoading(e)||i(e)}))},a.deletePP=function(){var e=Object(F.a)(B.a.mark((function e(t){var n,r,i,o,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props,r=n.history,i=n.ppId,o=n.reset,(c=n.setLoading)({state:!0,message:"Suppression du plan de prise en cours... "}),e.abrupt("return",b.a.delete("".concat(window.php.routes.api.planprise.destroy,"/").concat(i),{data:{token:window.php.routes.token}}).then((function(){o(r)})).catch((function(e){c({state:!1,message:""}),console.log("Error destroying pp",e)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleAddLine=function(){var e=Object(F.a)(B.a.mark((function e(t){var n,r,i,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.addLine,i=n.history,o={id:t.value,denomination:t.label,type:t.type},e.abrupt("return",r(o,i));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.generatePDF=function(){var e=a.props,t=e.ppId,n=e.repository;return function(e,t,n){var a={pageSize:"A4",pageOrientation:"landscape",pageMargins:[20,50],header:{stack:[{text:"Un plan pour vous aider \xe0 mieux prendre vos m\xe9dicaments",style:"header"},{text:"Ceci n'est pas une ordonnance",style:"header"}],margin:[20,20]},footer:function(t,n){return{columns:[{text:"\xc9dit\xe9 par ".concat(window.php.user.name),style:"footer"},{text:"Plan de prise n\xb0".concat(e),alignment:"center",style:"footer"},{text:"Page ".concat(t.toString()," sur ").concat(n),alignment:"right",style:"footer"}],margin:[20,20]}},content:[{table:{layout:"planPrise",headerRows:1,dontBreakRows:!0,body:[Object(zt.a)(re()(t,(function(e){return{text:e.header,alignment:P()(e.id,"poso_")?"center":"left",style:["tableHeader",e.id]}})))].concat(Object(zt.a)(re()(n,(function(e){return Object(zt.a)(re()(t,(function(t){return O()(e,t.id,{text:" ",style:t.id})})))})))),widths:re()(t,(function(e){return P()(e.id,"poso_")?40:"auto"}))}}],defaultStyle:{fontSize:10,fillOpacity:.5},styles:Object(C.a)({header:{bold:!0,color:"gray",fontSize:9},get footer(){return this.header},tableHeader:{bold:!0,fillOpacity:1},interline:{fontSize:2},custom_denomination:{bold:!0},compositions:{italics:!0,color:"gray"},voies_administration:{fontSize:9,color:"gray"}},an()(tn()(t,(function(e){return re()(P()(e.id,"poso_"),(function(e){return[e.id,{alignment:"center",fillColor:e.color}]}))}))))};Qt.a.createPdf(a).open()}(t,n.columns,n.values)},a.state={showSettings:!1},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){if(this.init(),50===this.count)throw Error();this.count=(this.count||0)+1}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,a=t.history,i=t.isLoading,o=t.ppId,c=t.repository,s=t.reset,l=this.state.showSettings;return r.a.createElement(Et.a,null,r.a.createElement(bt.a,{className:"justify-content-center"},r.a.createElement(yt.a,{xl:8},o&&!i.state&&r.a.createElement(Xe.a,{variant:"link",onClick:function(){return s(a)}},r.a.createElement("span",{className:"fa fa-arrow-left"}),"Retour \xe0 la liste"),r.a.createElement(Ot.a,null,r.a.createElement(Ot.a.Header,{className:"d-flex"},r.a.createElement("div",{className:"flex-fill"},-1===o?"Nouveau Plan de Prise":null===o?"Que voulez-vous faire ? ":o>0?"Plan de prise n\xb0".concat(o):null),o>0&&!i.state?r.a.createElement("div",{className:"d-flex"},r.a.createElement("a",{className:"btn text-success py-0",href:"".concat(o,"/print")},r.a.createElement("i",{className:"fa fa-print"})),r.a.createElement(Xe.a,{className:"text-success py-0",variant:"link",onClick:function(){return e.generatePDF()}},r.a.createElement("i",{className:"fa fa-file-pdf"})),r.a.createElement(Xe.a,{className:"text-secondary py-0",variant:"link",onClick:function(){return e.setShowSettings(!0)}},r.a.createElement("i",{className:"fa fa-cog"})),r.a.createElement(Xe.a,{className:"text-danger py-0",variant:"link",onClick:this.deletePP},r.a.createElement("i",{className:"fa fa-trash"}))):null),r.a.createElement(Ot.a.Body,null,i.state?r.a.createElement("div",null,r.a.createElement(pt.a,null),r.a.createElement("span",{className:"ml-3"},i.message)):null===o?r.a.createElement(Cn,null):r.a.createElement(Rt.a,{className:"plan-prise",enter:!1},n&&re()(n,(function(e){return r.a.createElement(Mt.a,{key:e.id,classNames:"plan-prise-card",timeout:500},r.a.createElement(fn,{denomination:e.denomination,details:Vt()(c.valuesObject,["line",e]),isLoaded:c.isLoaded(e),lineId:e.id,needChoice:O()(c.needChoice,e.id,[]),repository:c}))})),r.a.createElement(En,{multiple:!1,onSelect:function(t){return e.handleAddLine(t)}})))))),r.a.createElement(kn,{setShowSettings:function(t){return e.setState({showSettings:t})},showSettings:l}))}}]),n}(r.a.Component),Sn=Object(m.o)(Object(d.b)((function(e){return{content:e.planPrise.content,customData:e.planPrise.customData,data:e.data.data,isLoading:e.planPrise.isLoading,list:e.planPrise.list,ppId:e.planPrise.pp_id,repository:new Zt({content:e.planPrise.content,customData:e.planPrise.customData,data:e.data.data,settings:e.planPrise.settings}),settings:e.planPrise.settings}}),(function(e){return{addLine:function(t,n){return e(function(e,t){return function(){var t=Object(F.a)(B.a.mark((function t(n,a){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(xe({type:"add",value:e})),ue(a().planPrise.pp_id),ue.flush();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},init:function(t){return e(ke(t))},load:function(t){return e(function(e){return function(){var t=Object(F.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(J(e,"isLoading",!0)),t.abrupt("return",k().post(window.php.routes.api.all.show,{id:e.id,type:e.type}).then((function(t){if(200===!t.status)throw new Error(t.statusText);var a;return n((a=t.data,{type:H,details:a})),n(J(e,"isLoading",!1)),!0})).catch((function(e){return console.log(e),document.location.reload()})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},loadList:function(){return e(function(){var e=Object(F.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de().then((function(e){Z()(e)&&t({type:ye,list:e})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},reset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(je(t))},setLoading:function(t){return e(function(e){return{type:me,values:e}}(t))}}}))(Ln)),Nn=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),a=t.call(this,e),Je.getState().auth.token||Je.dispatch(ct()),a}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(d.a,{store:Je},r.a.createElement(p.BrowserRouter,{basename:"/"},r.a.createElement(lt,null),r.a.createElement(m.g,null,r.a.createElement(m.d,{exact:!0,path:"/"},r.a.createElement(Ze,null)),r.a.createElement(m.d,{path:"/inscription"},r.a.createElement(St,{role:at.register})),r.a.createElement(m.d,{path:"/connexion"},r.a.createElement(St,{role:at.signin})),r.a.createElement(Nt,{path:"/deconnexion"},r.a.createElement(St,{role:at.signout})),r.a.createElement(Nt,{path:"/profile"},r.a.createElement(Dt,null)),r.a.createElement(Nt,{path:"/plan-prise/:id"},r.a.createElement(Sn,null)),r.a.createElement(Nt,{path:"/plan-prise"},r.a.createElement(Sn,null)))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));if(document.getElementById("root")){var Pn=document.getElementById("root");o.a.render(r.a.createElement(Nn,null),Pn)}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[376,1,2]]]);
//# sourceMappingURL=main.951fb9ba.chunk.js.map